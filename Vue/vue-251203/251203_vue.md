# Vue
## Component State Flow
## Passing Props
## Props

### 동일한 데이터, 하지만 다른 컴포넌트(1)
- 동일한 사진 데이터가 한 화면에 다양한 위치에서 여러 번 출력되고 있음
- 하지만 해당 페이지를 구성하는 컴포넌트가 여러 개라면 각 컴포넌트가 개별적으로 동일한 데이터를 관리해야 할까? 
- 그렇다면 사진을 변경 해야 할 때 모든 컴포넌트에 대해 변경 요청을 해야 함

=> **공통된 부모 컴포넌트에서 관리하자**


### 동일한 데이터, 하지만 다른 컴포넌트(2)
- 부모는 자식에게 데이터를 전달(**Pass Props**)
- 자식은 자신에게 일어난 일을 부모에게 알림(Emit event)


### Props
- **부모 컴포넌트로부터 자식 컴포넌트로 데이터를 전달하는데 사용되는 사용자 지정 특성**
- Props는 **부모** 컴포넌트가 **자식** 컴포넌트에게 데이터를 전달할 때 사용하는 특별한 속성
- 데이터는 부모에게 자식으로 한 방향으로만 흐르며, 자식 컴포넌트는 전달받은 props를 직접 수정해서는 안됨(읽기 전용)
- 이 방식을 통해 가능한 컴포넌트를 만들고, 부모가 어떤 데이터를 전달하는냐에 따라 자식의 내용과 모습을 다르게 설정할 수 있음


### Props 특징
- 부모의 데이터가 업데이트되면 자식에게 전달되지만, **그 반대는 불가능** (**단방향**)
- 즉, 자식 컴포넌트 내부에서 props를 변경하려고 시도해서는 안되며 불가능
- 또한 부모 컴포는트가 업데이트될 때마다 이를 사용하는 자식 컴포넌트의 모든 props가 최신 값으로 업데이트 됨

=> 부모 컴포넌트에서만 변경하고 이를 내려 받는 자식 컴포넌트는 자연스럽게 갱신

* 자식이 부모 속성을 바꾸려면, props를 수정하지 말고 emit을 이용해서 부모에게 알려야 함
* 객체/배열 props는 자식에게 내부 값을 바꾸면 부모의 원본도 바뀌니, 매우 주의해야 함


### One-Way Data Flow
- 모든 props는 자식 속성과 부모 속성 사이에 **하향식 단방향 바인딩**을 형성 (one-way-down-binding)
- 단방향인 이유
  - 하위 컴포넌트가 실수로 상위 컴포넌트의 상태를 변경하여 앱에서의 데이터 흐름을 이해하기 어렵게 만드는 것을 방지하기 위함 (무한 루프, 디버깅 난이도 상승 등)
- 데이터 흐름의 **일관성** 및 **예측 가능성**을 높이는 것이 목표


---


## Props 선언
### Props 작성
- 부모 컴포넌트 Parent에서 자식 컴포넌트 ParentChild에 보낼 props 작성
` my-msg(props 이름) = “message”(props 값) `

```html
  <!-- Parent.vue -->
  <template>
    <div>
      <ParentChild my-msg="message" />
    </div>
  </template>
```


### Props 선언
- 부모 컴포넌트에서 내려 보낸 props를 사용하기 위해서는 자식 컴포넌트에서 명시적인 props 선언이 필요
- defineProps()를 사용하여 props를 선언

```html
<script setup>
  defineProps()
</script>
```

- defineProps()에 전달하는 인자의 형태에 따라 선언 방식이 나뉨
  1. "문자열 배열"을 사용한 선언
  2. "객체"를 사용한 선언


### 1. 문자열 배열을 사용한 선언
- 배열의 문자열 요소로 props 선언
- 문자열 요소의 이름은 전달된 props의 이름

```html
<!-- ParentChild.vue -->
<script setup>
  defineProps(['myMsg'])
</script>
```


### 2. 객체를 사용한 선언

- 각 객체 속성의 키가 전달받은 props 이름이 됨
- 객체 속성의 값은 해당 데이터의 타입에 맞는 생성자 함수(String, Number 등)여야 함

```html
<!-- ParentChild.vue -->
<script setup>
  defineProps({
    myMsg: String
  })
</script>
```

* 가급적 "객체를 사용한 선언"을 사용하는 것을 권장
  - 각 prop에 대해 상세한 규칙(유효성 검사)을 설정하여 컴포넌트의 안정성을 높여줌
  - 객체 구문은 그 자체로 컴포넌트의 설명서 역할을 하므로, 코드를 통해 명확하게 의사소통이 가능
