# SQL
## Database
- 체계적으로 정리된 데이터의 모음

### Data
- 저장이나 처리를 위해 변환된 정보 
- 분석, 계산, 저장을 위해 정보를 구체적인 형태로 정리한 것 
- 데이터를 저장하고 잘 관리하여 활용할 수 있는 기술이 중요해짐 

1. 파일(File) 이용
- 어디에서나 쉽게 사용 가능
- 데이터를 구조적으로 관리하기 어려움

2. 스프레드 시트(Spreadsheet) 이용
- 테이블의 열과 행을 사용해 데이터를 구조적으로 관리 가능

2-1. 스프레드 시트의 한계
- 크기 
  - 일반적으로 약 100만행까지만 저장 가능

- 보안
  - 단순히 파일이나 링크 소유 여부에 따른 단순한 접근 권한 기능 제공

- 정확성
  - 변경으로 인해 테이블 모든 위치에서 해당 값을 업데이트 해야 함
  - 망약 데이터가 여러 시트에 분산되어 있다면 변경에 누락이 생기거나 추가 문제가 발생할 수 있음

### 데이터베이스 역할
- Create, Read, Update, Delete


---


## Relational Database
### 데이터베이스 역할
- 데이터를 저장하고 조작 

### Relational Database
- 데이터 간에 관계가 있는 데이터 항목들의 모음 
- 테이블, 행, 열의 정보를 구조화하는 방식
- **서로 관련된 데이터 포인터를 저장**하고 이에 대한 **엑세스**를 제공 

### 데이터베이스 역할
### 관계
- 여러 테이블 간의 (논리적) 연결
- 데이터를 각각의 테이블에 나눠 저장하되, 공통된 키 값을 통해 서로 연결하여 필요할 때 함께 조회하거나 조작할 수 있도록 함 


### 관계로 할 수 있는 것
- 이 관계로 인해 두 테이블을 사용하여 데이터를 다양한 형식으로 조회할 수 있음
  - 특정 날짜에 구매한 모든 고객 조회
  - 지난 달에 배송일이 지연된 고객 조회 등

### 각 데이터에 고유한 식별 값을 부여
- 기본키, Primary Key

### 주문-고객 테이블 연결 
- 주문 정보에 고객의 고유한 식별 값을 저장하기 
- 외래키, Foriegn Key 

### 관계형 데이터베이스 관련 키워드
1. Table(Relation)
- 데이터를 기록하는 곳

2. Field(Column, Attribute)
- 각 필드에는 고유한 데이터 형식(타입)이 지정됨 

3. Record(Row, Tuple)
- 각 레코드에는 구체적인 데이터 값이 저장됨

4. Database(Schema)
- 테이블의 집합 

5. Primary Key(기본 키, PK)
- 각 레코드의 고유한 값
- 관계형 데이터베이스에서 레코드의 식별자로 활용 

6. Foreign Key(외래 키, FK)
- 테이블의 필드 중 다른 테이블의 레코드를 식별할 수 있는 키
- 다른 테이블의 기본 키를 참조
- 각 레코드에서 서로 다른 테이블 간의 **관계를 만드는 데** 사용


---


## RDBMS
### DBMS(Database Management System)
- 데이터베이스를 관리하는 소프트웨어 프로그램 
- 데이터 저장 및 관리를 용이하게 하는 시스템
- 데이터베이스와 사용자 간의 인터페이스 역할
- 사용자가 데이터 구성, 업데이트, 모니터링, 백업, 복구 등을 할 수 있도록 도움 

### RDBMS(Relational Database Management System)
- 관계형 데이터베이스 관리 소프트웨어 프로그램
- 데이터를 여러 테이블에 나누어 저장하되, 공통된 키를 통해 서로 **관계**를 맺고 함께 사용할 수 있게 해주는 시스템 

### RDBMS 서비스 종류
- SQLite
- MySQL
- PostgreSQL
- Oracle Database

### SQLite
- 경량의 오픈 소스 데이터베이스 관리 시스템
- 설치 없이 가볍게 실행 가능해 모바일 앱이나 소규모 프로그램에 적합
-> 컴퓨터나 모바일 기기에 내장되어 간단하고 효율적인 데이터 저장 및 관리를 제공

### 데이터베이스 정리
- Table은 데이터가 기록되는 곳
- Table에는 행에서 고유하게 식별 가능한 기본 키라는 속성이 있으며, 외래 키를 사용하여 각 행에서 서로 다른 테이블 간의 관계를 만들 수 있음
- 데이터는 기본 키 또는 외래 키를 통해 결합(join)될 수 있는 여러 테이블에 걸쳐 구조화 됨


---


## SQL(Structure Query Language)
- 테이블의 형태로 구조화된 관계형
- 데이터베이스에게 요청을 질의(요청)
- 표준화된 요청서 양식 / 명확하게 약속된 형식에 따라 정확한 요청

### SQL Syntax

`SELECT column_name FROM table_name;`

1. SQL 키워드는 대소문자를 구분하지 않음
- 하지만 대문자로 작성하는 것을 권장(명시적 구분)

2. 각 SQL Statements의 끝에는 세미콜론(';')이 필요
- 세미콜론은 각 SQL Statements을 구분하는 방법(명령어의 마침표)


---


## SQL Statements
- SQL을 구성하는 가장 기본적인 코드 블록

### SQL Statements 예시 
`SELECT column_name FROM table_name;`
- 해당 예시 코드는 SELECT Statement라 부름
- Statement는 SELECT, FROM 2개의 keyword로 구성

### 수행 목적에 따른 SQL Statements 4가지 유형
1. DDL - 데이터 정의
2. DQL - 데이터 검색
3. DML - 데이터 조작
4. DCL - 데이터 제어 

| **유형**  | **영문명 (Full Name)**        | **역할**                 | **대표 SQL 키워드**                          |
| ------- | -------------------------- | ---------------------- | --------------------------------------- |
| **DDL** | Data Definition Language   | 데이터의 기본 구조 및 형식 변경     | `CREATE`, `DROP`, `ALTER`               |
| **DQL** | Data Query Language        | 데이터 검색                 | `SELECT`                                |
| **DML** | Data Manipulation Language | 데이터 조작 (추가, 수정, 삭제)    | `INSERT`, `UPDATE`, `DELETE`            |
| **DCL** | Data Control Language      | 데이터 및 작업에 대한 사용자 권한 제어 | `COMMIT`, `ROLLBACK`, `GRANT`, `REVOKE` |


---


## Quering data

## DQL(Data Query Language)
- 데이터 검색
- `SELECT`

## SELECT
`SELECT select_list FROM table_name;`

- SELECT 키워드 이후 데이터를 선택하려는 필드를 하나 이상 지정
- FROM 키워드 이후 데이터를 선택하려는 테이블의 이름을 지정

### SELECT 정리 
- 테이블의 데이터를 조회 및 반환
- '*'(asterisk)를 사용하여 모든 필드 선택 
- AS '별칭'


---


## Sorting data
### ORDER BY
`SELECT select_list FROM table_name ORDER BY column1 [ASC|DESC], column2 [ASC|DESC], ...;`

- FROM clause 뒤에 위치
- 하나 이상의 컬럼을 기준으로 결과를 오름차순(ASC, 기본 값), 내림차순(DESC)으로 정렬 

### 정렬에서의 NULL 
- NULL 값이 존재할 경우 오름차순 정렬 시 결과에 NULL이 먼저 출력

### SELECT statement 실행 순서
`FROM` -> `SELECT` -> `ORDER BY`
1. 테이블에서 (FROM)
2. 조회하여 (SELECT)
3. 정렬 (ORDER BY)


---


## Filtering data 
### Filtering data 관련 Keywords
- Cluase
  - **DISTINCT**
  - **WHERE**
  - **LIMIT**

- Operator
  - **BETWEEN**
  - **IN**
  - **LIKE**
  - Comparison
  - Logical 

* Clause 
- SQL 문장에서 특정 기능을 수행하도록 지정하는 문장 구성 요소

* Operator 
- SQL에서 조건을 비교하거나 데이터를 선택하기 위해 사용하는 명령 기호 또는 키워드 


---


## DISTINCT
`SELECT DISTINCT select_list FROM table_name`

- SELECT 키워드 바로 뒤에 작성해야 함
- SELECT DISTINCT 키워드 다음에 고유한 값을 선택하려는 하나 이상의 필드를 지정


---


## WHERE
`SELECT select_list FROM table_name WHERE search_condition;`
- FROM clause 뒤에 위치
- search_condition은 비교연산자 및 논리연산자(AND, OR, NOT 등)를 사용하는 구문이 사용됨


---


| **구분**             | **항목**         | **설명**                                   |
| ------------------ | -------------- | ---------------------------------------- |
| **Clause (절)**     | **DISTINCT**   | 중복된 값을 제거하고 고유한 결과만 조회                   |
|                    | **WHERE**      | 조건을 지정하여 특정 행만 선택                        |
|                    | **LIMIT**      | 조회할 결과 행의 개수를 제한                         |
| **Operator (연산자)** | **BETWEEN**    | 특정 범위 내의 값을 조회 (`BETWEEN A AND B`)       |
|                    | **IN**         | 여러 값 중 하나와 일치하는 데이터를 조회 (`IN (a, b, c)`) |
|                    | **LIKE**       | 패턴 일치 검색 (`LIKE 'A%'`, `LIKE '%B'`)      |
|                    | **Comparison** | 비교 연산 (`=`, `!=`, `>`, `<`, `>=`, `<=`)  |
|                    | **Logical**    | 논리 연산 (`AND`, `OR`, `NOT`)               |


---


## Operators
### Comparison Operators
- 비교 연산자
  - =, <=, >=, !=
  - IS, LIKE, IN
  - BETWEEN ... AND


### Logical Operators
- 논리 연산자
  - AND(&&)
  - OR(||)
  - NOT(!)

### Wildcard Characters
- '%' : 0개 이상의 문자열과 일치 하는지 확인
- '_' : 단일 문자와 일치하는지 확인 


---


## LIMIT
`SELECT select_list FROM table_name LIMIT [offset,] row_count`

- 하나 또는 두 개의 인자를 사용 (0 또는 양의 정수)
- row_count는 조회하는 최대 레코드 수를 지정


---


## Grouping data
### GROUP BY
`SELECT c1, c2, ..., cn, aggregate_function(ci) FROM table_name GROUP BY c1, c2, ..., cn;`

- FROM 및 WHERE 절 뒤에 배치
- GROUP BY 절 뒤에 그룹화 할 필드 목록을 작성 
- 레코드를 그룹화하여 요약본 생성("집계함수"와 함께 사용)

### Aggrecation Functions(집계함수)
- 값에 대한 계산을 수행하고 단일한 값을 반환하는 함수
- SUM, AVG, MAX, MIN, COUNT

1. 필드를 그룹화
`SELECT Country FROM customers GROUP BY Country;`

2. COUNT 함수는 그룹별로 묶은 총 수를 반환
`SELECT Country, COUNT(*) FROM customers GROUP BY Country;`

* 앞에서 별칭 사용시 뒤에 GROUP BY 해줄 때도 별칭으로 해줘야 함


---


## HAVING
- 집계 항목에 대한 세부 조건을 지정
- 주로 GROUP BY와 함께 사용되며 GROUP BY가 없다면 WHERE 처럼 동작 

### WHERE와 HAVING 비교
| 구분        | **WHERE**                                  | **HAVING**                               |
| --------- | ------------------------------------------ | ---------------------------------------- |
| **목적**    | 개별 행(row)에 대한 조건을 지정하여 데이터를 필터링            | `GROUP BY`로 그룹화된 결과에 대해 조건을 지정하여 그룹을 필터링 |
| **적용 시점** | `FROM`, `JOIN` 등의 단계 이후, `GROUP BY` 이전에 적용 | 그룹핑 및 집계 함수(`SUM`, `AVG` 등) 적용 후 조건을 평가  |
| **사용 예**  | 특정 조건을 만족하는 행만을 대상으로 집계나 정렬 등의 작업 수행 시 사용  | 그룹별 집계 결과에 조건을 걸어 특정 그룹만 선택할 때 사용        |


### SELECT statement 실행 순서
`FROM` -> `WHERE` -> `GROUP BY` -> `HAVING` -> `SELECT` -> `ORDER BY` -> `LIMIT` 

1. 테이블에서 (FROM)
2. 특정 조건에 맞추어 (WHERE)
3. 그룹화 하고 (GROUP BY)
4. 만약 그룹 중에서 조건이 있다면 맞추고 (HAVING)
5. 조회하여 (SELECT)
6. 정렬하고 (ORDER BY)
7. 특정 위치의 값을 가져옴 (LIMIT)


---


## Query 
- 데이터베이스로부터 정보를 요청하는 것
- 일반적으로 SQL로 작성하는 코드를 쿼리문(SQL문)이라 함


---


## NULL 비교
### NULL
- SQL에서 NULL은 실제 값이 아니라 '값이 없음' 또는 '알수 없음'을 의미 
- 때문에 일반적인 등호('=') 연산자로 NULL을 비교하면 의도한 대로 작동하지 않음

### SQL의 3값 논리 
- SQL은 논리 연산에 대해 세 가지 값을 사용
  1. TRUE
  2. FALSE
  3. UNKNOWN(알 수 없음)

- 에를 들어, 'NULL = NULL'의 결과는 TRUE가 아니라 'UNKNOWN'이 됨
- 이는 두 NULL이 실제로 어떤 값을 가지고 있지 않기 때문

### 값의 부재와 불확실성
- NULL은 '값이 존재하지 않음'을 나타내므로, 특정 값과 동일하다고 볼 수 없음
- '=' 연산자를 사용하면, NULL은 어떤 값과도 비교할 수 없으므로 결과가 UNKNWON이 되어 기대한 결과를 얻지 못함

### 명시적 비교: IS와 IS NOT
- SQL 표준은 NULL 값을 비교할 때 명시적으로 IS NULL 또는 IS NOT NULL 구문을 사용하도록 규정
- WHERE column IS NULL은 해당 컬럼에 값이 없음을 정확하게 확인할 수 있도록 해줌
- 반대로 WHERE column IS NOT NULL은 값이 존재하는 행을 찾음

### =와 IS 비교 
| 구분        | **`=` (Equal Operator)**                                                                                                      | **`IS` (IS Operator)**                                                             |
| --------- | ----------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| **용도**    | 일반적인 값의 **동등성(같음)** 비교                                                                                                        | `NULL`이나 `TRUE`/`FALSE` 같은 **특수 값 비교**                                             |
| **특징**    | - 비교하는 값 중 하나라도 `NULL`이면 결과는 `UNKNOWN` <br> - 즉, `NULL = NULL` 은 `TRUE`가 아닌 `UNKNOWN` <br> - SQL의 3값 논리(참, 거짓, 알 수 없음)에 의해 발생 | - `NULL` 과 같은 특별한 값 비교에 사용 <br> - `Boolean` 값(`TRUE`, `FALSE`) 비교에도 사용 가능          |
| **예시 코드** | `sql SELECT * FROM employees WHERE department = 'Sales'; `                                                                    | `sql SELECT * FROM employees WHERE department IS NULL;  WHERE is_active IS TRUE; ` |



---


## SQL 표준
- SQL은 미국 국립 표준 협회(ANSI)와 국제 표준화 기구(ISO)에 의해 표준이 채택됨
- 모든 RDBMS에서 SQL 표준을 지원
- 다만 각 RDBMS마다 독자적인 기능에 따라 표준을 벗어나는 문법이 존재하니 주의 