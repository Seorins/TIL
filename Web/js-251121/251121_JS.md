# Javascript
## Dom 조작과 Event
### DOM이란?
- 웹 페이지의 모든 내용을 JavaScript가 이해하고 조작할 수 있도록 만든 구조화된 모델


### DOM 조작이란?
- JS가 웹페이지의 뼈대(HTML)와 디자인(CSS)을 실시간으로 통제하는 핵심 기술


### Event란?
- 웹 페이지 내에서 발생하는 모든 사건을 말하며, JavaScript가 이를 감지하여 우리가 원하는 특정 동작을 실행하도록 만드는 방아쇠 역할

=> DOM 조작과 Event 처리는 웹 페이지를 단순한 정적인 문서가 아니라, 사용자가 끊임없이 대화하고 반응하는 살아있는 인터페이스로 만들어줌 


### DOM 조작과 Event 처리 활용
1. 즉각적인 피드백
  - 사용자와 상호작용
  - 실시간 유효성 확인
2. 효율적인 정보 관리
  - 평소에는 숨겨 두었다가 필요할 때 보여줌
3. 시각적 매력과 몰입감
  - 사용자 서비스 이용 경험 개선


---


## Input Event
- 데이터를 입력할 때마다 발생하는 이벤트 


### 유사한 입력 이벤트 Keyup
- Input Event
  - 요소의 value(값)이 변경될 때 
  - **붙여넣기에도 반응**하는 검사 가능

- Keyup Event
  - 키보드 키가 눌렸다가 떼어질 때
  - 특정 키(예:Enter 키)를 눌렀을 때만 동작 수행


---


## 입력 유효성 확인 실습 
### 최대 글자 개수를 넘어서면 사용자에게 알려주기

- Input Event를 활용한 유효성 확인

```html
<h1>텍스트 입력 제한 (20자)</h1>
<input type="text" class="text-input" id="textInput" placeholder="최대 20자">
<div class="counter" id="counter">0 / 20</div>
```


### 기본적인 스타일 정의 및 움직임 요소 추가

```css
body {
    margin: 20px;
    background: white;
}

.text-input {
    width: 300px;
    padding: 10px;
    font-size: 16px;
    border: 2px solid black;
}

/* 20자를 넘어갔을 때의 스타일 */
/* class가 text-input이고 error 이면 적용됨 */
/* 클래스 둘다 들어있어야 함 */
.text-input.error {
    background-color: #ffcccc;
    animation: shake 0.5s;
}

.counter {
    margin-top: 10px;
}

/* 움직임을 정의 이름은 shake */
/* 실행되면 제자리에서 좌로 갔다가 우로 갔다가 제자리로 돌아오는 움직임 정의 */
@keyframes shake {
    0%, 100% { transform: translateX(0); }  /* 시작과 끝은 제자리 */
    25% { transform: translateX(-5px); }    /* 25% 시점은 -5px 이동 (좌측) */
    75% { transform: translateX(5px); }     /* 75% 시점은 5px 이동 (우측) */
}
```


### CSS animation
- JS를 사용하지 않고도 복잡한 움직임을 구현할 수 있게 해주는 CSS의 기능
- **시작**부터 **끝**까지 애니메이션의 **전반적인 규칙**을 정의
- 주요 animation 속성들
  - animation-name : 어떤 동작을 할지(Keyframes 이름 지정)
  - animation-duration : 몇 초 동안 진행할지
  - animation-timing-funciton : 속도 변화(느리게, 시작/끝 등)


### CSS keyframes 작성 예시
- CSS 애니메이션의 **개별 동작 단계**와 **변화 지점**을 정의하는 규칙
- **@keyframes**라는 특별한 문법으로 정의 

```css
/* 애니메이션의 이름은 'pulse' 입니다. */
@keyframes pulse {
  0% {
    /* 0%: 시작 지점 (초기 상태) */
    transform: scale(1);
    /* 원래 크기 */
    opacity: 1;
    /* 불투명도 100% */
  }
  50% {
    /* 50%: 중간 지점 */
    transform: scale(1.2);
    /* 크기 1.2배 */
    opacity: 0.5;
    /* 반투명 */
  }
  100% {
    /* 100%: 종료 지점 */
    transform: scale(1);
    /* 다시 원래 크기로 돌아옵니다. */
    opacity: 1;
  }
}
```


### CSS transfoms
- 요소를 **이동, 회전, 크기 조절, 기울이기** 등을 할 수 있게 해주는 CSS 속성
  - `transform: [함수]([값]);` 형태로 사용

- transforms에서 사용하는 주요 함수들
  - `translate(x, y)` : x축과 y측으로 이동
  - `rotate(각도)` : 회전
  - `scale(x, y)` : x축과 y축 배율 조절
  - `skew(x각도, y각도)` : x축과 y축 기준으로 기울이기 


### Input Event를 활용한 유효성 확인
- JS를 통한 input Event 발생시 DOM 조작 요소 정의

```JS
const textInput = document.querySelector('#textInput')
const counter = document.querySelector('#counter')
const maxLength = 20

textInput.addEventListener('input', function (e) {
  const currentLength = e.target.value.length
  if (currentLength > maxLength) {
    e.target.value = e.target.value.substring(0, maxLength) // 입력 제한
    e.target.classList.add('error') // 에러 효과 추가
    setTimeout(() => {
      e.target.classList.remove('error') // 에러 효과 500ms 이후 제거
    }, 500)
  }
  return

  // 글자 수 표시
  counter.textContent = `${currentLength} / ${maxLength}`
})
```


### 실행 결과
- 20자를 넘어가면 붉은 색으로 변하며 입력창이 좌우로 흔들리는 것을 확인할 수 있음


---


### Drag Event
- 웹 페이지의 요소를 **끌어서 이동시키는 과정**에서 발생하는 이벤트 
- 단순한 하나의 이벤트가 아닌 끌기 시작부터 끌기 종료까지 모든 단계에서 순서대로 발생하는 여러 개의 이벤트 그룹


### Drag Event 중요한 조건

`draggable - "true"`
- 드래그 하려는 HTML 요소에서 이 속성을 추가해야 요소가 드래그될 수 있음
- 기본 값은 false로 요소가 드래그 되지 않음을 확인할 수 있음


### Drag Event 종류
- **요소에서 발생**하는 Event (마우스로 드래그 중인 요소에서 발생)
  - **dragstart 이벤트**
    - 사용자가 요소를 끌기 시작하는 순간 **끌리는 요소**에서 발생
  - **drag 이벤트**
    - 사용자가 요소를 끌고 다니는 과정 동안 **끌리는 요소**에서 계속 발생
  - **dragend 이벤트**
    - 사용자가 마우스 버튼을 놓거나 드래그가 끝나는 순간 **끌리는 요소**에서 발생


- 드래그 **영역에서 발생**하는 Event(드래그 되는 요소 아래 위치한 영역에서 발생)
  - **dragenter 이벤트**
    - 끌고 있는 요소가 대상 영역 위로 들어올 때 **해당 영역**에서 발생
  - **dragover 이벤트**
    - 끌고 있는 요소가 대상 영역 위에 머물고 있는 동안 **해당 영역**에서 발생
    - 이 때, 기본 동작을 취소해여 drop이 가능(마우스 포인터 모양이 다름)
  - **dragleave 이벤트**
    - 끌고 있는 요소가 대상 영역 밖으로 벗어날 때 **해당 영역**에서 발생
  - **drop 이벤트**
    - 끌고 있던 요소를 대상 영역 위에 놓는 순간 **해당 영역**에서 발생 


### Drag Event 발생 예시
- 사용자가 **아이콘(요소)**을 클릭하고 끌기 시작
  - **아이콘**에서 dragstart 이벤트 발생
- 사용자가 **아이콘**을 **휴지통(영역)**위로 가져감
  - **휴지통**에서 dragenter 이벤트 발생
- 사용자가 **아이콘**을 **휴지통**위에서 움직임
  - **휴지통**에서 dragover 이벤트가 지속적으로 발생
- 사용자가 **휴지통**위에서 마우스 버튼을 놓음
  - **휴지통**에서 drop 이벤트 발생 (실제 데이터 처리)
  - **아이콘**에서 dragend 이벤트 발생 (드래그 행위 종료)


---


## 카드 순서 바꾸기 실습
### 드래그를 통한 순서 바꾸기 실습 진행
- Drag Event 실습
  - 드래그를 통해 카드 위치 변경
  - 드래그 되는 동안 들어갈 곳을 임시로 표시


### Drag Event 실습
- Drag Event 시작과 끝에 대한 이벤트 추가
- 카드가 드래그 되고 있음을 스타일링 하기 위함 

```js
// 1. 드래그 시작 리스너
// 현재 드래그 중인 것을 표시하기 위함
container.addEventListener('dragstart', (e) => {
  draggedCard = e.target
  e.target.classList.add('dragging')
})
```

```js
container.addEventListener('dragend', (e) => {
  draggedCard = null
  e.target.classList.remove('dragging')
})
```


### Drag Event 실습
- 카드 배치 원리
  - 현재 드래그 중인 마우스 포인터의 위치가 바닥의 카드의 중심의 위치를 게산하여
  - 드래그 중인 마우스 포인터가 **가운데 보다 앞쪽**이면 드래그 카드는 **바닥 카드 앞에 위치**
  - 드래그 중인 마우스 포인터가 **가운데 보다 뒤쪽**이면 드래그 카드는 **바닥 카드 뒤에 위치**